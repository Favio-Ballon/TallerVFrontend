<div class="bg-white/90 p-6 rounded-2xl border border-white/30 shadow-md">
  <h2 class="text-lg font-semibold mb-4">Gestionar faltas</h2>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
    <div>
      <label class="block text-sm font-medium mb-1">Curso (Semestre - Materia)</label>
      <select class="w-full px-3 py-2 rounded-md border" (change)="onFaltasCourseSelect($any($event.target).value)">
        <option value="">-- seleccionar curso --</option>
        <option *ngFor="let s of semestreMaterias" [value]="s.id">{{ s.materia.nombre }} — {{ s.semestre.nombre }} ({{ s.docente.nombre }} {{ s.docente.apellido }})</option>
      </select>
    </div>
  </div>

  <div *ngIf="faltasList && faltasList.length > 0">
    <div class="overflow-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="text-left text-gray-600">
            <th class="py-2">ID</th>
            <th>Alumno</th>
            <th>Faltas</th>
            <th>Acción</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let f of faltasList" class="border-t">
            <td class="py-2">{{ f.id }}</td>
            <td>{{ f.alumno.nombre }} {{ f.alumno.apellido }}</td>
            <td class="flex items-center gap-2">
              <span class="mr-2">{{ f.faltas }}</span>
              <input type="number" class="w-20 px-2 py-1 border rounded" [(ngModel)]="faltasToUpload[f.id!]" min="0" />
              <button class="bg-yellow-500 text-white px-2 py-1 rounded" [disabled]="uploadingFalta[f.id!]" (click)="subirFaltas(f.id!)">
                {{ uploadingFalta[f.id!] ? '...' : 'Subir' }}
              </button>
            </td>
            <td>
              <button class="bg-red-500 text-white px-2 py-1 rounded" (click)="remove(f.id)">Eliminar</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div *ngIf="!faltasList || faltasList.length === 0" class="text-gray-500">No hay estudiantes para gestionar faltas en el curso seleccionado.</div>
</div>
