<div class="admin-section">
  <div class="bg-white/95 rounded-2xl shadow-2xl p-8 backdrop-blur-lg border border-white/30">
    <div class="text-center mb-6">
      <h2 class="text-2xl font-bold text-gray-800">Asignaciones Semestre - Materia</h2>
      <p class="text-gray-600">Crear, editar, cerrar y eliminar asignaciones de materias a semestres</p>
    </div>

    <form (ngSubmit)="save()" [formGroup]="form" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Materia</label>
          <select formControlName="materiaId" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">-- Seleccione --</option>
            <option *ngFor="let m of materias" [value]="m.id">{{ m.nombre }}</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Semestre</label>
          <select formControlName="semestreId" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">-- Seleccione --</option>
            <option *ngFor="let s of semestres" [value]="s.id">{{ s.nombre }}</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Docente</label>
          <select formControlName="docenteId" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">-- Seleccione --</option>
            <option *ngFor="let d of docentes" [value]="d.id">{{ d.nombre }} {{ d.apellido }}</option>
          </select>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Modalidad</label>
          <select formControlName="modalidadId" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">-- Seleccione --</option>
            <option *ngFor="let md of modalidades" [value]="md.id">{{ md.nombre }}</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Cupos</label>
          <input type="number" formControlName="cupos" min="0" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>

        <div class="flex items-center gap-2">
          <input type="checkbox" formControlName="estaActivo" id="estaActivo" class="w-4 h-4" />
          <label for="estaActivo" class="text-sm text-gray-700">Activo</label>
        </div>
      </div>

      <div class="flex gap-3">
        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded">{{ editingId ? 'Actualizar' : 'Crear' }}</button>
        <button type="button" class="px-4 py-2 border rounded" (click)="clear()">Limpiar</button>
      </div>
    </form>

    <h3>Listado de Asignaciones</h3>
    <div class="overflow-x-auto">
      <table class="min-w-full">
      <thead>
        <tr>
          <th>Materia</th>
          <th>Semestre</th>
          <th>Docente</th>
          <th>Modalidad</th>
          <th>Cupos</th>
          <th>Activo</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let it of lista" class="sem-materia-row">
          <td data-label="Materia">{{ it.materia.nombre }}</td>
          <td data-label="Semestre">{{ it.semestre.nombre }}</td>
          <td data-label="Docente">{{ it.docente.nombre }} {{ it.docente.apellido }}</td>
          <td data-label="Modalidad">{{ it.modalidad.nombre }}</td>
          <td data-label="Cupos">{{ it.cupos }}</td>
          <td data-label="Activo">{{ isActive(it) ? 'SÃ­' : 'No' }}</td>
          <td data-label="Acciones" class="admin-actions-cell">
            <button class="px-3 py-1 bg-yellow-400 rounded" (click)="edit(it)">Editar</button>
            <button class="px-3 py-1 bg-red-500 text-white rounded" (click)="remove(it.id)">Eliminar</button>
            <button class="px-3 py-1 bg-gray-700 text-white rounded" (click)="cerrar(it.id)">Cerrar</button>
          </td>
        </tr>
      </tbody>
      </table>
    </div>
  </div>
</div>

